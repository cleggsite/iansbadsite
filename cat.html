<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <title>Cat Clicker</title>
</head>
<body>
    <div id="nav">
        <div id="left">
            <p id="title"><b>CAT CLICKER</b></p>
        </div>
        <div id="right">
            <a href="index.html"><button><b>HOME</b></button></a>
            <a href="cat.html"><button><b>CAT</b></button></a>
            <a href="about.html"><button><b>CHANGELOG</b></button></a>
            <a href="contact.html"><button><b>CONTACT</b></button></a>
        </div>
    </div>
    <div id="region">
        <div id="click-sec">
            <div id="click-info">
                <h2 id="click-sec-head">Cat Clicker</h2>
                <h2 id="clicks">Clicks : </h2>
                <h2 id="CPS">CPS : </h2>
            </div>
            <div id="clicker">
                <button id="catbutt" onclick="catClicked()"><img src="cat.jpg" id="catboi" draggable="false"></button><p id="spacer"></p>
            </div>
            <button id="rebirth" onclick="popup()">Rebirth #<span id="rebirthCount"></span>&nbsp;for $5,000,000,000</button><p></p>
        </div>
        <div id="gamble-sec"><p id="smol-spacer"></p>
            <h1 id="gamble-head">Gamble</h1>
            <h2 id="gamble-sub-head">Wager</h2>
            <p id="smol"><span id="slide-cost"></span></p>
            <p id="smol"><span id="slide-val"></span></p><p id="smol-spacer"></p>
            <input type="range" id="wager" name="wager" min="1" max="100" value="50"><p id="smol-spacer"></p>
            <button id="bet-butt" onclick="roll()">BET</button><p id="spacer"></p>
            <img id="die" src="die1.png"><p id="smol-spacer"></p>
            <p id="gamble-desc">Rolling a number from 1-3 is a win and will double your wager.</p>
            <p id="gamble-desc">Rolling a number from 4-6 is a loss and will erase your wager.</p>
            <div id="win">
                <h1>YOU WIN</h1>
                <h2 id="wager-earn"></h2>
            </div>
            <div id="loss">
                <h1>YOU LOSE</h1>
                <h2 id="wager-loss"></h2>
            </div>
        </div>
        <div id="auto-sec">
            <button id="upgrade" onclick="clickVal()"><h4>Increased click value : <span id="cValCount"></span></h4><h4><span id="cValCost"></span></h4><h5><span id="clickWorth"></span></h5></button>
            <button id="upgrade" onclick="petter()"><h4>Cat petter : <span id="pCount"></span></h4><h4><span id="pCost"></span></h4><h5>1 CPS</h5></button>
            <button id="upgrade" onclick="feeder()"><h4>Cat feeder : <span id="fCount"></span></h4><h4><span id="fCost"></span></h4><h5>3 CPS</h5></button>
            <button id="upgrade" onclick="sitter()"><h4>Cat sitter : <span id="sCount"></span></h4><h4><span id="sCost"></span></h4><h5>12 CPS</h5></button>
            <button id="upgrade" onclick="groomer()"><h4>Cat groomer : <span id="gCount"></span></h4><h4><span id="gCost"></span></h4><h5>35 CPS</h5></button>
            <button id="upgrade" onclick="breeder()"><h4>Cat breeder : <span id="bCount"></span></h4><h4><span id="bCost"></span></h4><h5>100 CPS</h5></button>
            <button id="upgrade" onclick="trainer()"><h4>Cat trainer : <span id="tCount"></span></h4><h4><span id="tCost"></span></h4><h5>300 CPS</h5></button>
            <button id="upgrade" onclick="meme()"><h4>Cat meme : <span id="mCount"></span></h4><h4><span id="mCost"></span></h4><h5>1,500 CPS</h5></button>
            <button id="upgrade" onclick="fat()"><h4>Fat cat : <span id="fatCount"></span></h4><h4><span id="fatCost"></span></h4><h5>4,000 CPS</h5></button>
            <button id="upgrade" onclick="scientist()"><h4>Cat scientist : <span id="scCount"></span></h4><h4><span id="scCost"></span></h4><h5>15,000 CPS</h5></button>
            <button id="upgrade" onclick="nation()"><h4>Cat nation : <span id="nCount"></span></h4><h4><span id="nCost"></span></h4><h5>50,000 CPS</h5></button>
            <button id="upgrade" onclick="overlord()"><h4>Cat overlord : <span id="oCount"></span></h4><h4><span id="oCost"></span></h4><h5>200,000 CPS</h5></button>
            <button id="upgrade" class="lupgrade" onclick="planet()"><h4>Cat planet : <span id="plCount"></span></h4><h4><span id="plCost"></span></h4><h5>1,000,000 CPS</h5></button>
        </div>
    </div>
    <div id="usure">
        <h1>Are you sure?</h1>
        <h2>Doing this will restart all of your progress in exchange for an infinite +5% CPS boost.</h2><p id="smol-spacer"></p>
        <div>
            <button id="opt" onclick="hidepopup()">NO WAY!</button>
            <button id="opt" onclick="rebirth()">LET'S DO IT</button>
        </div>
    </div>
    
    <!-- <h2>Changelog</h2>
    <h2>1/23/26 1:37pm : Added commas / button hovers</h2><p id="spacer">&nbsp;</p>
    -->
    <script>
        const TAB_ID = crypto.randomUUID(); // Unique ID for this tab
        const LOCK_KEY = "activeTab"; // Key to store active tab ID

        function checkDuplicate() {
            const activeTab = localStorage.getItem(LOCK_KEY);

            if (activeTab && activeTab !== TAB_ID) {
                // Duplicate detected
                alert("Duplicate tab detected. This tab will be closed.");
                // Attempt to close the tab
                window.close();

                // If the browser blocks close(), redirect to blank page
                window.location.href = "about:blank";
                return true;
            } else {
                // Set this tab as active
                localStorage.setItem(LOCK_KEY, TAB_ID);
                return false;
            }
        }

        // Remove tab from lock on unload
        window.addEventListener("beforeunload", () => {
            const activeTab = localStorage.getItem(LOCK_KEY);
            if (activeTab === TAB_ID) {
                localStorage.removeItem(LOCK_KEY);
            }
        });

        // Check for duplicates immediately
        if (!checkDuplicate()) {
            console.log("This tab is active. You can play safely.");
        }
        function initLocalStorage(key, value) {
        if (localStorage.getItem(key) === null) {
            localStorage.setItem(key, value);
        }
        }
        initLocalStorage("clicks", 0)
        initLocalStorage("petterCost", 50);
        initLocalStorage("petters", 0);
        initLocalStorage("feederCost", 200);
        initLocalStorage("feeders", 0);
        initLocalStorage("sitterCost", 1500);
        initLocalStorage("sitters", 0);
        initLocalStorage("groomerCost", 5000);
        initLocalStorage("groomers", 0);
        initLocalStorage("breederCost", 25000);
        initLocalStorage("breeders", 0);
        initLocalStorage("trainerCost", 100000);
        initLocalStorage("trainers", 0);
        initLocalStorage("memeCost", 750000);
        initLocalStorage("memes", 0);
        initLocalStorage("fatCost", 3000000);
        initLocalStorage("fats", 0);
        initLocalStorage("scientistCost", 15000000);
        initLocalStorage("scientists", 0);
        initLocalStorage("nationCost", 75000000);
        initLocalStorage("nations", 0);
        initLocalStorage("overlordCost", 300000000);
        initLocalStorage("overlords", 0);
        initLocalStorage("planetCost", 1500000000);
        initLocalStorage("planets", 0);
        initLocalStorage("clickValCost", 30);
        initLocalStorage("clickValCount", 0);
        initLocalStorage("clickWorth", 1);
        initLocalStorage("clickWorthInc", 1);
        initLocalStorage("rebirths", 0);
        var clicks = Number(localStorage.getItem('clicks')) || 0;
        clicks++;
        clicks--;
        localStorage.setItem('clicks', clicks);
        var rebirths = Number(localStorage.getItem("rebirths")) || 0;
        var clickValCount = Number(localStorage.getItem("clickValCount")) || 0;
        var petters = Number(localStorage.getItem("petters")) || 0;
        var feeders = Number(localStorage.getItem("feeders")) || 0;
        var sitters = Number(localStorage.getItem("sitters")) || 0;
        var groomers = Number(localStorage.getItem("groomers")) || 0;
        var breeders = Number(localStorage.getItem("breeders")) || 0;
        var trainers = Number(localStorage.getItem("trainers")) || 0;
        var memes = Number(localStorage.getItem("memes")) || 0;
        var fats = Number(localStorage.getItem("fats")) || 0;
        var scientists = Number(localStorage.getItem("scientists")) || 0;
        var nations = Number(localStorage.getItem("nations")) || 0;
        var overlords = Number(localStorage.getItem("overlords")) || 0;
        var planets = Number(localStorage.getItem("planets")) || 0;
        var clickWorth = Number(localStorage.getItem("clickWorth")) || 1;
        var clickWorthInc = Number(localStorage.getItem("clickWorthInc")) || 1;
        var clickValCost = Number(localStorage.getItem("clickValCost")) || 30;
        var petterCost = Number(localStorage.getItem("petterCost")) || 50;
        var feederCost = Number(localStorage.getItem("feederCost")) || 200;
        var sitterCost = Number(localStorage.getItem("sitterCost")) || 1500;
        var groomerCost = Number(localStorage.getItem("groomerCost")) || 5000;
        var breederCost = Number(localStorage.getItem("breederCost")) || 25000;
        var trainerCost = Number(localStorage.getItem("trainerCost")) || 100000;
        var memeCost = Number(localStorage.getItem("memeCost")) || 750000;
        var fatCost = Number(localStorage.getItem("fatCost")) || 3000000;
        var scientistCost = Number(localStorage.getItem("scientistCost")) || 15000000;
        var nationCost = Number(localStorage.getItem("nationCost")) || 75000000;
        var overlordCost = Number(localStorage.getItem("overlordCost")) || 300000000;
        var planetCost = Number(localStorage.getItem("planetCost")) || 1500000000;
        document.getElementById("cValCost").innerHTML = "$" + Math.floor(clickValCost).toLocaleString("en-US");
        document.getElementById("cValCount").innerHTML = clickValCount;
        document.getElementById("pCost").innerHTML = "$" + Math.floor(petterCost).toLocaleString("en-US");
        document.getElementById("pCount").innerHTML = petters;
        document.getElementById("fCost").innerHTML = "$" + Math.floor(feederCost).toLocaleString("en-US");
        document.getElementById("fCount").innerHTML = feeders;
        document.getElementById("sCost").innerHTML = "$" + Math.floor(sitterCost).toLocaleString("en-US");
        document.getElementById("sCount").innerHTML = sitters;
        document.getElementById("gCost").innerHTML = "$" + Math.floor(groomerCost).toLocaleString("en-US");
        document.getElementById("gCount").innerHTML = groomers;
        document.getElementById("bCost").innerHTML = "$" + Math.floor(breederCost).toLocaleString("en-US");
        document.getElementById("bCount").innerHTML = breeders;
        document.getElementById("tCost").innerHTML = "$" + Math.floor(trainerCost).toLocaleString("en-US");
        document.getElementById("tCount").innerHTML = trainers;
        document.getElementById("mCost").innerHTML = "$" + Math.floor(memeCost).toLocaleString("en-US");
        document.getElementById("mCount").innerHTML = memes;
        document.getElementById("fatCost").innerHTML = "$" + Math.floor(fatCost).toLocaleString("en-US");
        document.getElementById("fatCount").innerHTML = fats;
        document.getElementById("scCost").innerHTML = "$" + Math.floor(scientistCost).toLocaleString("en-US");
        document.getElementById("scCount").innerHTML = scientists;
        document.getElementById("nCost").innerHTML = "$" + Math.floor(nationCost).toLocaleString("en-US");
        document.getElementById("nCount").innerHTML = nations;
        document.getElementById("oCost").innerHTML = "$" + Math.floor(overlordCost).toLocaleString("en-US");
        document.getElementById("oCount").innerHTML = overlords;
        document.getElementById("plCost").innerHTML = "$" + Math.floor(planetCost).toLocaleString("en-US");
        document.getElementById("plCount").innerHTML = planets;
        document.getElementById("rebirthCount").innerHTML = rebirths + 1;
        document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
        document.getElementById("clickWorth").innerHTML = "Click Worth : " + Math.floor(clickWorth).toLocaleString("en-US");
        cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
        document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
        document.getElementById("slide-val").innerHTML = (`${wager.value}%`);
        document.getElementById("slide-cost").innerHTML = "$" + Math.floor(clicks*(wager.value/100)).toLocaleString("en-US");
        let rollInterval = null;
        rolling = false;
        const catButton = document.getElementById("catbutt");

        // Prevent Enter/Space from triggering clicks
        catButton.addEventListener("keydown", function(e) {
            if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
            }
        });
        function catClicked() {
            if (!rolling) {
                document.getElementById("slide-cost").innerHTML = "$" + Math.floor(clicks*(wager.value/100)).toLocaleString("en-US");
            }
            document.getElementById("catboi").style.transform = "scale(1.05)";
            localStorage.setItem('clicks', clicks+=clickWorth);
            document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
            setTimeout(function() {
                document.getElementById("catboi").style.transform = "scale(1)"; 
            }, 75);
        }
        function clickVal() {
            if (clicks >= clickValCost) {
                clicks -= clickValCost;
                clickValCount++;
                clickValCost = clickValCost*2.25;
                clickWorthInc = clickWorthInc*1.5;
                clickWorth += clickWorthInc;
                document.getElementById("cValCost").innerHTML = "$" + Math.floor(clickValCost).toLocaleString("en-US");
                document.getElementById("cValCount").innerHTML = clickValCount;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("clickValCount", clickValCount);
                localStorage.setItem("clickValCost", clickValCost);
                localStorage.setItem("clickWorthInc", clickWorthInc);
                localStorage.setItem("clickWorth", clickWorth);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                document.getElementById("clickWorth").innerHTML = "Click Worth : " + Math.floor(clickWorth).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function petter() {
            if (clicks >= petterCost) {
                clicks -= petterCost;
                petters++;
                petterCost = petterCost*1.15;
                document.getElementById("pCost").innerHTML = "$" + Math.floor(petterCost).toLocaleString("en-US");
                document.getElementById("pCount").innerHTML = petters;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("petters", petters);
                localStorage.setItem("petterCost", petterCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function feeder() {
            if (clicks >= feederCost) {
                clicks -= feederCost;
                feeders++;
                feederCost = feederCost*1.15;
                document.getElementById("fCost").innerHTML = "$" + Math.floor(feederCost).toLocaleString("en-US");
                document.getElementById("fCount").innerHTML = feeders;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("feeders", feeders);
                localStorage.setItem("feederCost", feederCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function sitter() {
            if (clicks >= sitterCost) {
                clicks -= sitterCost;
                sitters++;
                sitterCost = sitterCost*1.15;
                document.getElementById("sCost").innerHTML = "$" + Math.floor(sitterCost).toLocaleString("en-US");
                document.getElementById("sCount").innerHTML = sitters;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("sitters", sitters);
                localStorage.setItem("sitterCost", sitterCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function groomer() {
            if (clicks >= groomerCost) {
                clicks -= groomerCost;
                groomers++;
                groomerCost = groomerCost*1.15;
                document.getElementById("gCost").innerHTML = "$" + Math.floor(groomerCost).toLocaleString("en-US");
                document.getElementById("gCount").innerHTML = groomers;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("groomers", groomers);
                localStorage.setItem("groomerCost", groomerCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function breeder() {
            if (clicks >= breederCost) {
                clicks -= breederCost;
                breeders++;
                breederCost = breederCost*1.15;
                document.getElementById("bCost").innerHTML = "$" + Math.floor(breederCost).toLocaleString("en-US");
                document.getElementById("bCount").innerHTML = breeders;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("breeders", breeders);
                localStorage.setItem("breederCost", breederCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function trainer() {
            if (clicks >= trainerCost) {
                clicks -= trainerCost;
                trainers++;
                trainerCost = trainerCost*1.15;
                document.getElementById("tCost").innerHTML = "$" + Math.floor(trainerCost).toLocaleString("en-US");
                document.getElementById("tCount").innerHTML = trainers;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("trainers", trainers);
                localStorage.setItem("trainerCost", trainerCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function meme() {
            if (clicks >= memeCost) {
                clicks -= memeCost;
                memes++;
                memeCost = memeCost*1.15;
                document.getElementById("mCost").innerHTML = "$" + Math.floor(memeCost).toLocaleString("en-US");
                document.getElementById("mCount").innerHTML = memes;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("memes", memes);
                localStorage.setItem("memeCost", memeCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function fat() {
            if (clicks >= fatCost) {
                clicks -= fatCost;
                fats++;
                fatCost = fatCost*1.15;
                document.getElementById("fatCost").innerHTML = "$" + Math.floor(fatCost).toLocaleString("en-US");
                document.getElementById("fatCount").innerHTML = fats;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("fats", fats);
                localStorage.setItem("fatCost", fatCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function scientist() {
            if (clicks >= scientistCost) {
                clicks -= scientistCost;
                scientists++;
                scientistCost = scientistCost*1.15;
                document.getElementById("scCost").innerHTML = "$" + Math.floor(scientistCost).toLocaleString("en-US");
                document.getElementById("scCount").innerHTML = scientists;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("scientists", scientists);
                localStorage.setItem("scientistCost", scientistCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function nation() {
            if (clicks >= nationCost) {
                clicks -= nationCost;
                nations++;
                nationCost = nationCost*1.15;
                document.getElementById("nCost").innerHTML = "$" + Math.floor(nationCost).toLocaleString("en-US");
                document.getElementById("nCount").innerHTML = nations;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("nations", nations);
                localStorage.setItem("nationCost", nationCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function overlord() {
            if (clicks >= overlordCost) {
                clicks -= overlordCost;
                overlords++;
                overlordCost = overlordCost*1.15;
                document.getElementById("oCost").innerHTML = "$" + Math.floor(overlordCost).toLocaleString("en-US");
                document.getElementById("oCount").innerHTML = overlords;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("overlords", overlords);
                localStorage.setItem("overlordCost", overlordCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        function planet() {
            if (clicks >= planetCost) {
                clicks -= planetCost;
                planets++;
                planetCost = planetCost*1.15;
                document.getElementById("plCost").innerHTML = "$" + Math.floor(planetCost).toLocaleString("en-US");
                document.getElementById("plCount").innerHTML = planets;
                localStorage.setItem("clicks", clicks);
                localStorage.setItem("planets", planets);
                localStorage.setItem("planetCost", planetCost);
                document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
                document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            }
        }
        setInterval(function () {
            clicks += (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
            cliksPerSec = (petters*1 + feeders*3 + sitters*12 + groomers*35 + breeders*100 + trainers*300 + memes*1500 + fats*4000 + scientists*15000 + nations*50000 + overlords*200000 + planets*1000000) * ((rebirths*0.05) + 1);
            localStorage.setItem("clicks", clicks);
            document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
            document.getElementById("CPS").innerHTML = "CPS : " + Math.floor(cliksPerSec).toLocaleString("en-US");
            document.getElementById("slide-val").innerHTML = (`${wager.value}%`);
            saveGame();
            if (!rolling) {
                document.getElementById("slide-cost").innerHTML = "$" + Math.floor(clicks*(wager.value/100)).toLocaleString("en-US");
            }
        }, 1000);
        
        window.addEventListener('beforeunload', function() {
            saveGame();
        });

        function saveGame() {
            localStorage.setItem("clicks", clicks);
            localStorage.setItem("petters", petters);
            localStorage.setItem("feeders", feeders);
            localStorage.setItem("sitters", sitters);
            localStorage.setItem("groomers", groomers);
            localStorage.setItem("breeders", breeders);
            localStorage.setItem("trainers", trainers);
            localStorage.setItem("memes", memes);
            localStorage.setItem("fats", fats);
            localStorage.setItem("scientists", scientists);
            localStorage.setItem("nations", nations);
            localStorage.setItem("overlords", overlords);
            localStorage.setItem("planets", planets);
            localStorage.setItem("petterCost", petterCost);
            localStorage.setItem("feederCost", feederCost);
            localStorage.setItem("sitterCost", sitterCost);
            localStorage.setItem("groomerCost", groomerCost);
            localStorage.setItem("breederCost", breederCost);
            localStorage.setItem("trainerCost", trainerCost);
            localStorage.setItem("memeCost", memeCost);
            localStorage.setItem("fatCost", fatCost);
            localStorage.setItem("scientistCost", scientistCost);
            localStorage.setItem("nationCost", nationCost);
            localStorage.setItem("overlordCost", overlordCost);
            localStorage.setItem("planetCost", planetCost);
            localStorage.setItem("clickValCost", clickValCost);
            localStorage.setItem("clickValCount", clickValCount);
            localStorage.setItem("clickWorth", clickWorth);
            localStorage.setItem("clickWorthInc", clickWorthInc);
            localStorage.setItem("rebirths", rebirths);
            document.getElementById("rebirthCount").innerHTML = rebirths + 1;
        }

        document.getElementById("wager").addEventListener("input", () => {
           document.getElementById("slide-val").innerHTML = (`${wager.value}%`);
           if (!rolling) {
                document.getElementById("slide-cost").innerHTML = "$" + Math.floor(clicks*(wager.value/100)).toLocaleString("en-US");
           }
        });

        let rollTimer;
        let changeTime = 100;

        function roll() {
            if (!rolling) {
                rolling = true;
                wagerAmt = Math.floor(clicks * (wager.value / 100));
                
                clearTimeout(rollTimer);
                changeTime = 100;

                function step() {
                    dieChange();
                    changeTime *= 1.25; // exponential increase
                    rollTimer = setTimeout(step, changeTime);
                }

                step();

                setTimeout(() => {
                    clearTimeout(rollTimer);

                    if (dieamt >= 1 && dieamt <= 3) {
                        clicks += wagerAmt;
                        document.getElementById("wager-earn").innerHTML = "+$" + Math.floor(wagerAmt).toLocaleString("en-US");
                        setTimeout (() =>  {
                            const element = document.getElementById("win");
                            element.classList.remove("win");   
                            void element.offsetWidth;  
                            element.classList.add("win");     

                            element.addEventListener("animationend", () => {
                                element.classList.remove("win"); 
                            }, { once: true });
                            rolling = false;
                        }, 1000);
                    } 
                    else {
                        clicks -= wagerAmt;
                        document.getElementById("wager-loss").innerHTML = "-$" + Math.floor(wagerAmt).toLocaleString("en-US");
                        setTimeout (() =>  {
                            const elemento = document.getElementById("loss");
                            elemento.classList.remove("loss");   
                            void elemento.offsetWidth;  
                            elemento.classList.add("loss");     

                            elemento.addEventListener("animationend", () => {
                                elemento.classList.remove("loss"); 
                            }, { once: true });
                        }, 1000);
                    }
                    setTimeout (() =>  {
                        rolling = false;
                    }, 3000);
                    localStorage.setItem("clicks", clicks);
                    document.getElementById("clicks").innerHTML = "Clicks : " + Math.floor(clicks).toLocaleString("en-US");
                }, 2000);
            }
        }
        
        function dieChange() {
            dieamt = Math.floor(Math.random() * 6) + 1;   
            die.style.opacity = "0";
            setTimeout(() => {
                die.src = "die" + dieamt + ".png";
                die.style.opacity = "1";
            }, 100)
        }

        function popup() {
            if (clicks >= 5000000000) {
                document.getElementById("usure").style.opacity = 1;
                document.getElementById("usure").style.pointerEvents = "auto";
            }
        }
        function hidepopup() {
            document.getElementById("usure").style.opacity = 0;
            document.getElementById("usure").style.pointerEvents = "none";
        }
        function rebirth() {
            document.getElementById("usure").style.opacity = 0;
            document.getElementById("usure").style.pointerEvents = "none";
            clicks = 0;
            petters = 0;
            feeders = 0;
            sitters = 0;
            groomers = 0;
            breeders = 0;
            trainers = 0;
            memes = 0;
            fats = 0;
            scientists = 0;
            nations = 0;
            overlords = 0;
            planets = 0;
            clickValCost = 30;
            clickValCount = 0;
            clickWorth = 1;
            clickWorthInc = 1;
            petterCost = 50;
            feederCost = 200;
            sitterCost = 1500;
            groomerCost = 5000;
            breederCost = 25000;
            trainerCost = 100000;
            memeCost = 750000;
            fatCost = 3000000;
            scientistCost = 15000000;
            nationCost = 75000000;
            overlordCost = 300000000;
            planetCost = 1500000000;
            rebirths++;
            localStorage.setItem("rebirths", rebirths);
            document.getElementById("rebirthCount").innerHTML = rebirths + 1;
            saveGame();
            location.reload();
        }
    </script>
</body>
</html>
